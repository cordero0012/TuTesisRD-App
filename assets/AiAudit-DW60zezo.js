const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D52QotID.js","assets/react-vendor-fHhpFJoT.js","assets/doc-vendor-45wm4pqv.js"])))=>i.map(i=>d[i]);
import{_ as E}from"./pdf-vendor-CfVBgxx6.js";import{u as Q,a as Y,j as e}from"./index-CXwPkIaI.js";import{h as Z,d as v}from"./react-vendor-fHhpFJoT.js";import{a as X,g as ee,b as te}from"./client-kPybf3Mh.js";import{m as ae,w as se}from"./wordExportService-DKDeIa60.js";import"./ai-vendor-Cr1lv8uJ.js";import"./doc-vendor-45wm4pqv.js";function re(a){const l=(a.match(/[^.!?]+[.!?]+/g)||[a]).map(c=>c.trim().split(/\s+/).length);if(l.length<=1)return 0;const o=l.reduce((c,d)=>c+d,0)/l.length,t=l.reduce((c,d)=>c+Math.pow(d-o,2),0)/l.length;return Math.sqrt(t)}function ie(a){const l=(a.match(/[^.!?]+[.!?]+/g)||[a]).map(t=>t.trim().split(/\s+/).length);if(l.length<=1)return 0;const o=l.reduce((t,c)=>t+c,0)/l.length;return l.reduce((t,c)=>t+Math.pow(c-o,2),0)/l.length}function le(a){const s=a.toLowerCase().match(/\b\w+\b/g)||[];return s.length===0?0:new Set(s).size/s.length}function ne(a){const s=a.match(/[^.!?]+[.!?]+/g)||[];if(s.length<3)return 0;let l=0;const o=[];for(const t of s){const d=t.trim().split(/\s+/).slice(0,3).map(i=>/^[A-ZÁÉÍÓÚ]/.test(i)?"NOUN":["el","la","los","las","un","una","the","a","an"].includes(i.toLowerCase())?"ART":["es","son","está","están","is","are","was","were"].includes(i.toLowerCase())?"VERB":"OTHER").join("-");o.includes(d)&&l++,o.push(d)}return Math.min(l/s.length,1)}function oe(a){const s=a.split(/\n\n+/).filter(i=>i.trim().length>0);if(s.length<2)return 0;const l=s.map(i=>i.split(/\s+/).length),o=l.reduce((i,r)=>i+r,0)/l.length,t=l.reduce((i,r)=>i+Math.pow(r-o,2),0)/l.length,d=Math.sqrt(t)/o;return Math.max(0,1-d)}function ce(a){const s=["furthermore","moreover","in conclusion","it is important to note","additionally","consequently","subsequently","overall","on the other hand","as a result","in other words","for instance","specifically","notably","in summary","to summarize","in essence","importantly","significantly"],l=["además","sin embargo","por lo tanto","en consecuencia","por consiguiente","no obstante","de hecho","en primer lugar","en segundo lugar","por otro lado","en conclusión","es importante destacar","cabe destacar","es importante señalar","resulta evidente","asimismo","por ende","en resumen","en síntesis","como resultado","de esta manera","en este sentido","vale la pena mencionar","es necesario señalar","conviene destacar"],o=[...s,...l];let t=0;const c=a.toLowerCase();return o.forEach(d=>{const i=new RegExp(`\\b${d}\\b`,"gi");t+=(c.match(i)||[]).length}),t}function de(a){const s=a.toLowerCase().match(/\b\w+\b/g)||[];if(s.length<10)return .5;const l=s.map(h=>h.length),o=new Set(l).size,t=[];for(let h=0;h<s.length-1;h++)t.push(`${s[h]}_${s[h+1]}`);const c=new Set(t).size,d=t.length>0?c/t.length:.5,i=Math.min(o/15,1),r=d;return i*.4+r*.6}function xe(a){let s=50;return a.burstiness<3?s+=20:a.burstiness<5?s+=10:a.burstiness>8&&(s-=15),a.perplexityProxy<.35?s+=20:a.perplexityProxy<.45?s+=10:a.perplexityProxy>.55&&(s-=10),a.aiConnectorsCount>5?s+=15:a.aiConnectorsCount>3?s+=8:a.aiConnectorsCount===0&&(s-=5),a.sentenceLengthVariance<30?s+=15:a.sentenceLengthVariance<50?s+=8:a.sentenceLengthVariance>100&&(s-=10),a.structuralSymmetryScore>.4?s+=10:a.structuralSymmetryScore>.25&&(s+=5),a.paragraphUniformity>.8?s+=10:a.paragraphUniformity>.6&&(s+=5),a.lexicalDiversity<.35?s+=10:a.lexicalDiversity>.55&&(s-=5),Math.max(0,Math.min(100,s))}function L(a){const s=a.trim().split(/\s+/),l=a.match(/[^.!?]+[.!?]+/g)||[a],o={burstiness:re(a),lexicalDiversity:le(a),avgSentenceLength:s.length/l.length,sentenceCount:l.length,wordCount:s.length,perplexityProxy:de(a),readabilityScore:206.835-1.015*(s.length/l.length)-84.6*(a.length/s.length/5),aiConnectorsCount:ce(a),sentenceLengthVariance:ie(a),structuralSymmetryScore:ne(a),paragraphUniformity:oe(a),aiRiskScore:0};return o.aiRiskScore=xe(o),o}const me=async a=>{const s=L(a);return{...await B(a.substring(0,5e3),s),metrics:s}},pe=async(a,s)=>{const l=a.trim().replace(/\s+/g," "),o=L(l),t=12e3,c=[];for(let p=0;p<l.length;p+=t)c.push(l.substring(p,p+t));const d=c.length;let i=[],r=new Set,h=0,k=0,g={chatgpt:0,gemini:0,claude:0};for(let p=0;p<d;p++){const I=Math.round(p/d*100);s&&s(I,`Analizando bloque ${p+1} de ${d}...`);const S=L(c[p]);try{const b=await B(c[p],S);h+=b.score,k++,b.sourceProbabilities&&(g.chatgpt+=b.sourceProbabilities.chatgpt,g.gemini+=b.sourceProbabilities.gemini,g.claude+=b.sourceProbabilities.claude),i=[...i,...b.heatmap],b.signals.forEach(T=>r.add(T))}catch(b){console.error(`Error analyzing chunk ${p}`,b)}d>1&&await new Promise(b=>setTimeout(b,300))}s&&s(100,"Generando veredicto final...");const u=k||1,m=h/u;let N="A";return m>.8?N="D":m>.6?N="C":m>.3&&(N="B"),{score:m,category:N,confidence:k>d/2?"High":"Medium",signals:Array.from(r),heatmap:i.length>0?i:[{text:a.substring(0,200)+"...",probability:m}],metrics:o,sourceProbabilities:{chatgpt:Math.round(g.chatgpt/u),gemini:Math.round(g.gemini/u),claude:Math.round(g.claude/u)}}};async function B(a,s){var l,o,t,c;try{return await X({prompt:`
            Actúa como un experto forense en lingüística computacional, especializado en los modelos de detección Turnitin AIW-2, AIR-1 y Compilatio Magister+.
            
            Tu misión es analizar este fragmento de texto para detectar huellas de IA (ChatGPT, Gemini, Claude, Llama).

            === MÉTRICAS CUANTITATIVAS LOCALES ===
            - Burstiness: ${s.burstiness.toFixed(2)} (< 4.0 = ALTA SOSPECHA - IA tiene oraciones uniformes)
            - Perplejidad (Proxy): ${s.perplexityProxy.toFixed(2)} (< 0.4 = ALTA SOSPECHA - texto predecible)
            - Varianza de Longitud de Oración: ${s.sentenceLengthVariance.toFixed(2)} (< 50 = SOSPECHOSO)
            - Simetría Estructural: ${s.structuralSymmetryScore.toFixed(2)} (> 0.3 = SOSPECHOSO - construcciones paralelas)
            - Uniformidad de Párrafos: ${s.paragraphUniformity.toFixed(2)} (> 0.7 = SOSPECHOSO)
            - Conectores IA Detectados: ${s.aiConnectorsCount} (> 3 = SOSPECHOSO)
            - Diversidad Léxica: ${s.lexicalDiversity.toFixed(2)} (< 0.4 = SOSPECHOSO)
            - Puntuación de Riesgo IA Local: ${s.aiRiskScore}/100

            === PATRONES DE DETECCIÓN TURNITIN ===
            1. AIW-2 (Modelo Principal): Detecta BAJA perplejidad + BAJA variabilidad de oraciones
            2. AIR-1 (Detector de Parafraseo): Detecta sustitución mecánica de sinónimos
            3. Bypasser Detection: Detecta texto que pasó por humanizadores

            === PATRONES DE DETECCIÓN COMPILATIO MAGISTER+ ===
            1. Reformulaciones Profundas: Detecta texto reescrito manteniendo estructura semántica
            2. Plagio Semántico: Detecta significado preservado con palabras cambiadas
            3. Traducciones: Detecta artefactos de traducción automática
            
            === CONECTORES TÍPICOS DE IA (Lista Negra) ===
            Español: "además", "sin embargo", "por lo tanto", "en conclusión", "es importante destacar", "cabe señalar", "resulta evidente", "por ende"
            Inglés: "furthermore", "moreover", "in conclusion", "it is important to note", "additionally"

            === TEXTO A ANALIZAR ===
            "${a}"

            === SALIDA JSON REQUERIDA ===
            {
                "score": number, 
                "category": "A"|"B"|"C"|"D", 
                "confidence": "Low"|"Medium"|"High",
                "signals": ["señal detectada..."],
                "heatmap": [{ "text": "...", "probability": 0.0-1.0 }],
                "sourceProbabilities": { "chatgpt": 0-100, "gemini": 0-100, "claude": 0-100 },
                "turnitinIndicators": { "aiw2_score": 0-100, "air1_paraphrase_detected": boolean, "bypasser_detected": boolean },
                "compilatioIndicators": { "deep_reformulation": boolean, "semantic_plagiarism_score": 0-100, "translation_artifacts": boolean }
            }
            
            === INSTRUCCIONES CRÍTICAS ===
            - El "heatmap" debe dividir el texto en oraciones/frases resaltando las más sospechosas
            - Correlaciona tu análisis con las métricas locales
            - Sé estricto pero justo
            - IMPORTANTE: Incluye turnitinIndicators y compilatioIndicators en tu respuesta
            `,systemInstruction:"Actúa como un experto forense en lingüística computacional.",temperature:.1,provider:"gemini"})}catch(d){if(console.error("AI Detection failed",d),(l=d.message)!=null&&l.includes("API Key")||(o=d.message)!=null&&o.includes("API_KEY"))throw new Error("Falta la API Key de Gemini. Configúrala en Ajustes.");if((t=d.message)!=null&&t.includes("fetch failed")||(c=d.message)!=null&&c.includes("Network"))throw new Error("Error de Conexión. Verifica tu internet.");return{score:.5,category:"B",confidence:"Low",signals:["Error en análisis de fragmento: "+(d.message||"Desconocido")],heatmap:[{text:a.substring(0,100)+"...",probability:.5}],sourceProbabilities:{chatgpt:0,gemini:0,claude:0}}}}const ue=async(a,s="Documento Analizado")=>{try{const{jsPDF:l}=await E(async()=>{const{jsPDF:u}=await import("./pdf-vendor-CfVBgxx6.js").then(m=>m.j);return{jsPDF:u}},[]),o=(await E(async()=>{const{default:u}=await import("./pdf-vendor-CfVBgxx6.js").then(m=>m.c);return{default:u}},[])).default,t=new l,c=t.internal.pageSize.width,d=t.internal.pageSize.height;t.setFillColor(19,91,236),t.rect(0,0,c,25,"F"),t.setTextColor(255,255,255),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("Informe de Auditoría Forense de IA",14,16),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Generado por ScholarAI - ${new Date().toLocaleDateString()}`,14,22);let i=35;t.setTextColor(40,44,52),t.setFontSize(14),t.setFont("helvetica","bold"),t.text("1. Resumen Ejecutivo",14,i),i+=10,t.setFillColor(245,247,250),t.roundedRect(14,i,c-28,35,3,3,"F");const r=a.score<.4,h=r?[16,185,129]:[239,68,68];t.setTextColor(h[0],h[1],h[2]),t.setFontSize(24),t.setFont("helvetica","bold"),t.text(`${(a.score*100).toFixed(0)}%`,20,i+18),t.setFontSize(10),t.setTextColor(100,100,100),t.text("Probabilidad de Autoría IA",20,i+26),t.setFontSize(14),t.setTextColor(40,44,52),t.setFont("helvetica","bold");const k=r?"DOCUMENTO AUTÉNTICO":"PATRÓN SINTÉTICO DETECTADO";t.text(k,60,i+15),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Nivel de Confianza: ${a.confidence||"Media"}`,60,i+22),i+=45,t.setFontSize(12),t.setFont("helvetica","bold"),t.text("2. Métricas Estilométricas",14,i),i+=8;const g=[["Métrica","Valor","Interpretación"],["Burstiness (Variabilidad)",a.metrics.burstiness.toFixed(2),a.metrics.burstiness<4?"Baja (Sospechoso)":"Normal"],["Perplejidad (Proxy)",a.metrics.perplexityProxy.toFixed(2),a.metrics.perplexityProxy<.4?"Baja (Sospechoso)":"Normal"],["Diversidad Léxica",a.metrics.lexicalDiversity.toFixed(2),"-"]];return o(t,{startY:i,head:[g[0]],body:g.slice(1),theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[50,50,50],fontStyle:"bold"},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{fontStyle:"bold"}}}),i=t.lastAutoTable.finalY+15,a.signals&&a.signals.length>0&&(t.setFontSize(12),t.setFont("helvetica","bold"),t.text("3. Señales de IA Detectadas",14,i),i+=8,a.signals.forEach(u=>{t.setFillColor(254,242,242),t.rect(14,i,c-28,8,"F"),t.setTextColor(185,28,28),t.setFontSize(9),t.text(`• ${u}`,18,i+6),i+=10}),i+=5),a.sourceProbabilities&&(i>d-50&&(t.addPage(),i=20),t.setFillColor(40,44,52),t.setTextColor(40,44,52),t.setFontSize(12),t.setFont("helvetica","bold"),t.text("4. Análisis de Fuente Probable",14,i),i+=8,[{name:"ChatGPT / OpenAI",score:a.sourceProbabilities.chatgpt},{name:"Gemini / Google",score:a.sourceProbabilities.gemini},{name:"Claude / Anthropic",score:a.sourceProbabilities.claude}].sort((m,N)=>N.score-m.score).forEach(m=>{t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`${m.name}: ${m.score}%`,14,i),t.setFillColor(230,230,230),t.rect(60,i-3,100,3,"F"),t.setFillColor(19,91,236),t.rect(60,i-3,m.score,3,"F"),i+=8})),t.save(`Auditoria_IA_${s.substring(0,15)}.pdf`),!0}catch(l){throw console.error("Error generating Audit PDF:",l),l}},ke=()=>{var R,$,z,G,q,V;const{project:a,uploadedFile:s,setUploadedFile:l}=Q();Z();const{showNotification:o}=Y(),[t,c]=v.useState(""),[d,i]=v.useState(!1),[r,h]=v.useState(null),[k,g]=v.useState("audit"),[u,m]=v.useState("full"),[N,p]=v.useState(0),[I,S]=v.useState(""),[b,T]=v.useState(""),[F,M]=v.useState(!1);v.useEffect(()=>{if(s!=null&&s.content){const n=Array.isArray(s.content)?s.content.map(x=>x.text).join(`

`):s.content;typeof n=="string"&&n!==t&&(c(n),n.length>5e3&&m("full"))}else a.content&&!t&&(c(a.content),a.content.length>5e3&&m("full"))},[s,a.content]);const W=async()=>{if(t.trim()){if(u==="quick"&&t.length>6e3)if(confirm("El texto excede el límite recomendado para Análisis Rápido (6000 caracteres). ¿Quieres cambiar a Auditoría Completa?"))m("full");else return;i(!0),h(null),p(0),S("Iniciando análisis forense...");try{let n;u==="full"?n=await pe(t,(x,C)=>{p(x),S(C)}):n=await me(t),h(n)}catch(n){console.error("Analysis Error:",n),o("Hubo un error al realizar el análisis. Por favor intenta nuevamente.","error")}finally{i(!1),p(0)}}},U=async()=>{if(t.trim()){M(!0);try{const n=await ee({prompt:`Genera un resumen ejecutivo de máximo 3 párrafos para el siguiente documento académico. Enfócate n los puntos clave, metodología y conclusiones principales. Texto:

${t.substring(0,3e4)}`,systemInstruction:"Eres un asistente académico experto que resume tesis de forma clara y profesional.",provider:"groq",model:te,temperature:.5});T(n),o("Resumen instantáneo generado con Groq","success")}catch(n){console.error("Groq Summary Error:",n),o("Error al generar resumen con Groq","error")}finally{M(!1)}}},H=()=>{if(!r||!r.metrics)return null;const n=r.metrics.burstiness||0,x=r.metrics.perplexityProxy||0,C=[],j=Math.min(n,10)/2;for(let y=0;y<=100;y+=5){const f=80+Math.sin(y*.5)*j+Math.random()*Math.min(x,5)*20;C.push(`${y/100*800},${f}`)}const A=`M 0,100 Q ${C.join(" ")}`;return e.jsxs("svg",{className:"absolute inset-0 w-full h-full z-10 overflow-visible",preserveAspectRatio:"none",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient-line",x1:"0",x2:"1",y1:"0",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#135bec",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#135bec",stopOpacity:"1"})]})}),e.jsx("path",{d:`${A} L 800 150 L 0 150 Z`,fill:"url(#gradient-line)",opacity:"0.1"}),e.jsx("path",{d:A,fill:"none",stroke:"#135bec",strokeWidth:"3",vectorEffect:"non-scaling-stroke"}),e.jsx("circle",{className:"fill-white dark:fill-[#135bec] stroke-[#135bec] dark:stroke-white stroke-2",cx:"95%",cy:"80",r:"6"})]})};return e.jsx("div",{className:"flex h-[calc(100vh-64px)] w-full bg-slate-50 dark:bg-slate-900 font-sans text-slate-900 dark:text-white overflow-hidden",children:e.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsxs("header",{className:"h-20 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between px-8 bg-white dark:bg-slate-900 shrink-0 z-40",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold tracking-tight text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-primary",children:"security"}),"Laboratorio de Auditoría Forense"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Análisis Estratégico de Texto y Verificación de Integridad Académica"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-1 rounded-lg flex items-center",children:[e.jsx("button",{onClick:()=>m("quick"),className:`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${u==="quick"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Análisis Rápido"}),e.jsx("button",{onClick:()=>m("full"),className:`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${u==="full"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:"Auditoría Completa"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".pdf,.docx,.txt",onChange:async n=>{var C;const x=(C=n.target.files)==null?void 0:C[0];if(x){i(!0),p(0),S("Iniciando lectura..."),m("full");try{let j="";if(x.type==="application/pdf"||x.name.toLowerCase().endsWith(".pdf")){const A=await x.arrayBuffer(),y=await E(()=>import("./pdf-vendor-CfVBgxx6.js").then(f=>f.p),[]);if(!y.GlobalWorkerOptions.workerSrc){const f=await E(()=>import("./pdf.worker.min-BuDT2eDy.js"),[]);y.GlobalWorkerOptions.workerSrc=f.default}try{const f=await y.getDocument({data:A}).promise,w=f.numPages;if(w>150&&!confirm(`Este documento tiene ${w} páginas. ¿Deseas procesarlo por completo?`)){i(!1);return}for(let P=1;P<=w;P++){const J=Math.round(P/w*100);p(J),S(`Extrayendo texto: página ${P} de ${w}...`);const K=await(await f.getPage(P)).getTextContent();let D=-1,_="";for(const O of K.items)D!==-1&&Math.abs(O.transform[5]-D)>5&&(_+=`
`),_+=O.str,D=O.transform[5];j+=_+`

`}}catch(f){throw console.error("PDF Parsing error:",f),new Error("No se pudo extraer el texto del PDF.")}}else if(x.name.toLowerCase().endsWith(".docx")){S("Procesando Word...");const A=await x.arrayBuffer();j=(await(await E(()=>import("./index-D52QotID.js").then(w=>w.i),__vite__mapDeps([0,1,2]))).extractRawText({arrayBuffer:A})).value}else S("Leyendo archivo de texto..."),j=await new Promise(A=>{const y=new FileReader;y.onload=f=>{var w;return A(((w=f.target)==null?void 0:w.result)||"")},y.readAsText(x)});j.trim()?(l({name:x.name,type:x.type,size:x.size,content:j,lastModified:x.lastModified}),c(j),o("Documento cargado correctamente","success")):o("No se detectó texto en el documento","warning")}catch(j){console.error("Upload error:",j),o("Error al procesar el archivo","error")}finally{i(!1),p(0),n.target&&(n.target.value="")}}},className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm font-medium hover:bg-slate-50 dark:hover:bg-white/5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"upload_file"}),"Cargar Doc"]})]}),e.jsxs("button",{onClick:()=>{c(""),l(null)},className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm font-medium hover:bg-slate-50 dark:hover:bg-white/5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"}),"Limpiar"]}),e.jsxs("button",{onClick:U,disabled:F||!t.trim(),className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-primary text-primary text-sm font-bold hover:bg-primary/5 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:F?"bolt":"speed"}),F?"Resumiendo...":"Resumen Groq"]}),e.jsxs("button",{onClick:W,disabled:d||!t.trim(),className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-primary text-white text-sm font-bold hover:bg-blue-600 shadow-lg shadow-primary/20 disabled:opacity-50 transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] text-white",children:d?"hourglass_empty":"troubleshoot"}),d?"Analizando...":"Ejecutar Auditoría"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("aside",{className:"w-80 border-r border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 overflow-y-auto p-6 flex flex-col gap-8 shrink-0",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Matriz de Probabilidad"}),e.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative size-20 shrink-0",children:[e.jsxs("svg",{className:"size-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-slate-100 dark:text-slate-700",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3.5"}),e.jsx("path",{className:`${r?r.score>.6?"text-red-500":r.score>.3?"text-amber-500":"text-emerald-500":"text-slate-300"} transition-all duration-1000 ease-out`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeDasharray:`${r?r.score*100:0}, 100`,strokeWidth:"3.5",strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:e.jsxs("span",{className:"text-lg font-black text-slate-900 dark:text-white",children:[r?(r.score*100).toFixed(0):"0","%"]})})]}),e.jsxs("div",{className:"z-10",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Probabilidad de IA"}),r&&e.jsxs("div",{className:"mt-2 flex items-center gap-1.5",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${r.score>.4?"bg-red-500 animate-pulse":"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}`}),e.jsx("span",{className:`text-[11px] font-black uppercase ${r.score>.4?"text-red-500":"text-emerald-500"}`,children:r.score>.6?"Riesgo Alto":r.score>.3?"Riesgo Medio":"Seguro"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Indicadores Forenses"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase",children:"Origen del Análisis"})}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-500",children:"Patrones ChatGPT"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-700 dark:text-slate-300",children:[((R=r==null?void 0:r.sourceProbabilities)==null?void 0:R.chatgpt)||0,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-1 overflow-hidden",children:e.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-1000",style:{width:`${(($=r==null?void 0:r.sourceProbabilities)==null?void 0:$.chatgpt)||0}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-500",children:"Patrones Gemini"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-700 dark:text-slate-300",children:[((z=r==null?void 0:r.sourceProbabilities)==null?void 0:z.gemini)||0,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-1 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full transition-all duration-1000",style:{width:`${((G=r==null?void 0:r.sourceProbabilities)==null?void 0:G.gemini)||0}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-500",children:"Patrones Claude"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-700 dark:text-slate-300",children:[((q=r==null?void 0:r.sourceProbabilities)==null?void 0:q.claude)||0,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-1 overflow-hidden",children:e.jsx("div",{className:"bg-amber-500 h-full transition-all duration-1000",style:{width:`${((V=r==null?void 0:r.sourceProbabilities)==null?void 0:V.claude)||0}%`}})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 uppercase",children:"Ráfagas (Burstiness)"}),e.jsx("span",{className:"text-xs font-mono font-bold text-primary",children:(r==null?void 0:r.metrics.burstiness.toFixed(2))||"0.00"})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-primary h-full transition-all duration-1000",style:{width:`${Math.min(((r==null?void 0:r.metrics.burstiness)||0)*10,100)}%`}})})]})]})]}),r&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Señales Detectadas"}),e.jsx("div",{className:"space-y-2",children:r.signals.map((n,x)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-red-50 dark:bg-red-500/5 rounded-xl border border-red-100 dark:border-red-500/10 text-[11px] text-red-700 dark:text-red-400 font-medium leading-tight",children:[e.jsx("span",{className:"material-symbols-outlined text-sm shrink-0",children:"warning"}),n]},x))})]}),b&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Resumen Instantáneo (Groq)"}),e.jsxs("div",{className:"p-4 bg-primary/5 rounded-2xl border border-primary/20 text-[11px] text-slate-700 dark:text-slate-300 leading-relaxed relative group",children:[e.jsx("button",{onClick:()=>T(""),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-red-500",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})}),b]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white dark:bg-slate-900",children:[d&&u==="full"&&e.jsx("div",{className:"absolute inset-0 z-[60] bg-white/95 dark:bg-slate-900/95 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("h3",{className:"text-lg font-black uppercase text-slate-900 dark:text-white",children:"Procesando Documento"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[N,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3 overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-primary h-full transition-all duration-300 ease-out",style:{width:`${N}%`}})}),e.jsx("p",{className:"text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:I}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-8 opacity-50",children:[...Array(4)].map((n,x)=>e.jsx("div",{className:"h-1 bg-primary rounded-full animate-pulse",style:{animationDelay:`${x*.1}s`}},x))})]})}),e.jsxs("div",{className:"h-48 border-b border-slate-200 dark:border-slate-800 p-8 flex flex-col gap-4 relative overflow-hidden bg-slate-50/50 dark:bg-slate-950",children:[e.jsxs("div",{className:"flex justify-between items-start z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-black text-slate-900 dark:text-white flex items-center gap-2 uppercase tracking-widest",children:[e.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"monitoring"}),"Firma Lingüística"]}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Distribución Estática vs Aleatoria"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:"Perplejidad"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:"Ráfagas"})]})]})]}),e.jsxs("div",{className:"flex-1 w-full relative",children:[e.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none opacity-20",children:[...Array(4)].map((n,x)=>e.jsx("div",{className:"w-full h-px bg-slate-300 dark:bg-slate-700"},x))}),r?H():e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-xs font-bold text-slate-300 dark:text-slate-600 uppercase tracking-widest italic animate-pulse",children:"Esperando datos del análisis..."})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 p-1 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>g("split"),className:`px-4 py-1.5 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${k==="split"?"bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500"}`,children:"Vista Dividida"}),e.jsx("button",{onClick:()=>g("audit"),className:`px-4 py-1.5 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${k==="audit"?"bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500"}`,children:"Mapa de Auditoría"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:[t.trim().split(/\s+/).length," Palabras"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(t)},className:"text-[10px] font-black text-primary hover:text-blue-400 flex items-center gap-1 uppercase tracking-widest transition-all",children:[e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"content_copy"}),"Copiar Texto"]})]})]}),e.jsx("div",{className:"flex-1 flex min-h-0 font-sans",children:k==="split"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex flex-col border-r border-slate-200 dark:border-slate-800 min-w-0 group",children:[e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Fuente Original"}),e.jsx("span",{className:"material-symbols-outlined text-slate-300 group-hover:text-primary transition-colors text-[18px]",children:"terminal"})]}),e.jsx("textarea",{className:"flex-1 w-full bg-slate-50 dark:bg-slate-950 p-8 resize-none focus:outline-none text-slate-700 dark:text-slate-300 leading-relaxed overflow-y-auto font-sans text-base",value:t,onChange:n=>c(n.target.value),placeholder:u==="quick"?"Pega un párrafo corto para análisis rápido (Máx 5000 carácteres)...":"Carga un documento completo pare el escaneo profundo..."})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Visualizador de Auditoría"}),r&&e.jsxs("span",{className:`flex items-center gap-1 text-[10px] font-black px-2 py-0.5 rounded border ${r.score<.3?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-red-500/10 text-red-500 border-red-500/20"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:r.score<.3?"verified_user":"dangerous"}),r.score<.3?"AUTÉNTICO":"PATRÓN DE IA"]})]}),e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 p-8 overflow-y-auto text-slate-800 dark:text-slate-200 leading-relaxed",children:r?e.jsx("div",{className:"space-y-4",children:r.heatmap.map((n,x)=>e.jsxs("span",{className:`inline rounded px-1 transition-all duration-300 cursor-help ${n.probability>.7?"bg-red-500/20 text-red-900 dark:text-red-200 border-b-2 border-red-500":n.probability>.4?"bg-amber-500/20 text-amber-900 dark:text-amber-200 border-b-2 border-amber-500":"hover:bg-emerald-500/10 transition-colors"}`,title:`Riesgo Local: ${(n.probability*100).toFixed(0)}%`,children:[n.text," "]},x))}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-30 select-none",children:[e.jsx("span",{className:"material-symbols-outlined text-[64px] mb-4",children:"analytics"}),e.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"Esperando escaneo forense..."})]})})]})]}):e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 p-12 overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx("h3",{className:"text-center text-xs font-black uppercase tracking-[0.3em] text-slate-500 dark:text-slate-400 mb-12",children:"Mapa de Auditoría Completa"}),r?e.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.heatmap.map((n,x)=>e.jsxs("div",{className:`p-6 rounded-2xl border transition-all pointer-default ${n.probability>.7?"bg-red-50 dark:bg-red-500/5 border-red-100 dark:border-red-500/10":n.probability>.4?"bg-amber-50 dark:bg-amber-500/5 border-amber-100 dark:border-amber-500/10":"bg-slate-50 dark:bg-white/5 border-slate-100 dark:border-white/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-500 dark:text-slate-400",children:["Sección ",x+1]}),e.jsxs("span",{className:`text-[10px] font-black px-2 py-0.5 rounded-full ${n.probability>.7?"bg-red-500 text-white":n.probability>.4?"bg-amber-500 text-white":"bg-emerald-500 text-white"}`,children:[(n.probability*100).toFixed(0),"% Huella de IA"]})]}),e.jsx("p",{className:"text-lg leading-relaxed text-slate-800 dark:text-slate-200",children:n.text})]},x))}):e.jsxs("div",{className:"mt-20 flex flex-col items-center justify-center opacity-20",children:[e.jsx("span",{className:"material-symbols-outlined text-[120px] mb-8",children:"microscope"}),e.jsx("p",{className:"text-xl font-black uppercase tracking-widest animate-pulse",children:"Escaneo Incompleto"})]})]})})})]}),e.jsxs("footer",{className:"h-12 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 px-8 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-base text-emerald-500",children:"check_circle"}),"Sistema Operativo"]}),e.jsx("span",{className:"h-4 w-px bg-slate-200 dark:bg-slate-800"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Gemini-Pro Forensics v1.0"})]}),e.jsx("div",{className:"flex gap-6 items-center",children:e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 italic",children:"Sin política de retención activa (Los textos no se guardan)"})})]})]})]}),r&&e.jsxs("div",{className:"absolute bottom-8 right-8 z-50",children:[e.jsxs("button",{onClick:async()=>{try{await ue(r,"Analisis_Texto"),o("Reporte PDF descargado","success")}catch{o("Error al generar PDF","error")}},className:"flex items-center gap-2 px-6 py-4 bg-slate-900 text-white rounded-full shadow-2xl hover:scale-105 active:scale-95 transition-all text-sm font-bold animate-bounce-in",children:[e.jsx("span",{className:"material-symbols-outlined",children:"picture_as_pdf"}),"Exportar PDF"]}),e.jsxs("button",{onClick:async()=>{try{const n=ae(r);await se.generateWordDocument(n,"Auditoria_IA.docx"),o("Documento Word generado correctamente","success")}catch(n){console.error("Word export error:",n),o("Error exportando a Word","error")}},className:"flex items-center gap-2 px-6 py-4 bg-primary text-white rounded-full shadow-2xl hover:scale-105 active:scale-95 transition-all text-sm font-bold animate-bounce-in ml-4",children:[e.jsx("span",{className:"material-symbols-outlined",children:"description"}),"Exportar Word"]})]})]})})};export{ke as AiAudit};
