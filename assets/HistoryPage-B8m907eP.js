import{u as h,j as e,p}from"./index-CXwPkIaI.js";import{h as u,d as l}from"./react-vendor-fHhpFJoT.js";import"./pdf-vendor-CfVBgxx6.js";const N=()=>{const{project:a,session:d}=h(),r=u(),[n,o]=l.useState([]),[c,x]=l.useState(!0);l.useEffect(()=>{(async()=>{if(a.id&&a.id!=="offline-demo"){const i=await p.listAnalyses(a.id);o(i)}x(!1)})()},[a.id]);const m=t=>new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=t=>{switch(t.toLowerCase()){case"ok":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"partial":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}};return d?e.jsxs("div",{className:"p-6 max-w-6xl mx-auto animate-fade-in",children:[e.jsxs("header",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Historial de Análisis"}),e.jsxs("p",{className:"text-slate-500",children:["Consulta tus reportes previos de ",a.title]})]}),e.jsxs("button",{onClick:()=>r("/portal"),className:"flex items-center gap-2 text-slate-500 hover:text-brand-orange transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),"Volver al Dashboard"]})]}),c?e.jsx("div",{className:"flex justify-center p-20",children:e.jsx("span",{className:"material-symbols-outlined animate-spin text-4xl text-brand-orange",children:"sync"})}):n.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-3xl p-20 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-200 mb-4",children:"folder_open"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"No hay reportes aún"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Realiza tu primer análisis para comenzar a construir tu historial."}),e.jsx("button",{onClick:()=>r("/herramientas/matriz"),className:"px-6 py-3 bg-brand-orange text-white rounded-xl font-bold hover:scale-105 transition-transform",children:"Empezar Análisis"})]}):e.jsx("div",{className:"grid gap-4",children:n.map(t=>{const s=t.result.globalDiagnosis;return e.jsxs("div",{className:"group bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-5 rounded-2xl hover:border-brand-orange/30 transition-all flex flex-wrap md:flex-nowrap items-center gap-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-brand-orange/10 text-brand-orange flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined",children:t.type==="consistency"?"matrix":"rule"})}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200 capitalize",children:t.type==="consistency"?"Matriz de Consistencia":"Auditoría Normativa"}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase ${b(t.status)}`,children:t.status})]}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"calendar_today"}),m(t.created_at)]})]}),s&&e.jsxs("div",{className:"text-center px-6 border-x border-slate-100 dark:border-slate-800 hidden md:block",children:[e.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold mb-1",children:"Diagnóstico"}),e.jsx("div",{className:`text-sm font-black ${s.level==="Excelente"?"text-emerald-500":s.level==="Aceptable"?"text-blue-500":"text-amber-500"}`,children:s.level})]}),e.jsx("div",{className:"flex items-center gap-3 ml-auto",children:e.jsx("button",{onClick:()=>{console.log("Loading analysis:",t.id),r("/herramientas/matriz",{state:{loadedAnalysis:t.result}})},className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-brand-orange/10 hover:text-brand-orange text-slate-600 dark:text-slate-400 rounded-lg text-sm font-bold transition-all",children:"Ver Detalle"})})]},t.id)})})]}):e.jsxs("div",{className:"p-8 flex flex-col items-center justify-center min-h-[60vh] text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 mb-4",children:"lock"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Historial Privado"}),e.jsx("p",{className:"text-slate-500 max-w-md",children:"Debes iniciar sesión para ver y gestionar tu historial de análisis en la nube."})]})};export{N as default};
