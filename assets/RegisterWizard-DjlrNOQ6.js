import{j as e,s as j}from"./index-CXwPkIaI.js";import{L as p,f as C,d as i,u as R,h as T}from"./react-vendor-fHhpFJoT.js";import"./pdf-vendor-CfVBgxx6.js";const q=({mode:t,step:s})=>e.jsxs("aside",{className:"hidden md:flex w-80 lg:w-96 flex-col bg-blue-900 relative overflow-hidden shrink-0 z-20 shadow-2xl p-8 justify-between",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900 to-indigo-900"}),e.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 text-white mb-12 hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"school"}),e.jsx("span",{className:"font-bold text-xl",children:"TuTesisRD"})]}),t==="register"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex gap-4 items-center relative step-connector transition-all duration-300 ${s===1?"text-white font-bold opacity-100 scale-105":"text-white/50"}`,children:[e.jsx("div",{className:`size-10 rounded-full flex items-center justify-center font-bold transition-all ${s===1?"bg-white text-blue-900 shadow-lg":"border border-white/30"}`,children:s>1?e.jsx("span",{className:"material-symbols-outlined",children:"check"}):"1"}),e.jsx("span",{className:"text-lg",children:"Datos Personales"})]}),e.jsxs("div",{className:`flex gap-4 items-center relative step-connector transition-all duration-300 ${s===2?"text-white font-bold opacity-100 scale-105":"text-white/50"}`,children:[e.jsx("div",{className:`size-10 rounded-full flex items-center justify-center font-bold transition-all ${s===2?"bg-white text-blue-900 shadow-lg":"border border-white/30"}`,children:s>2?e.jsx("span",{className:"material-symbols-outlined",children:"check"}):"2"}),e.jsx("span",{className:"text-lg",children:"Detalles Proyecto"})]}),e.jsxs("div",{className:`flex gap-4 items-center relative transition-all duration-300 ${s===3?"text-white font-bold opacity-100 scale-105":"text-white/50"}`,children:[e.jsx("div",{className:`size-10 rounded-full flex items-center justify-center font-bold transition-all ${s===3?"bg-white text-blue-900 shadow-lg":"border border-white/30"}`,children:"3"}),e.jsx("span",{className:"text-lg",children:"Finalizar"})]})]}):e.jsxs("div",{className:"text-white",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Centro de Monitoreo"}),e.jsx("p",{className:"opacity-80",children:"Rastrea el progreso de tu tesis en tiempo real con tu código único."}),e.jsxs("div",{className:"mt-8 bg-white/10 p-4 rounded-xl backdrop-blur-sm border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"material-symbols-outlined",children:"secure"}),e.jsx("span",{className:"font-bold",children:"Seguro y Privado"})]}),e.jsx("p",{className:"text-xs opacity-70",children:"Solo tú tienes acceso a esta información mediante tu código de rastreo."})]})]})]}),e.jsx("div",{className:"text-white/60 text-sm relative z-10",children:"© 2023 TuTesisRD"})]}),P=C.memo(({formData:t,handleInputChange:s,nextStep:n})=>e.jsxs("div",{className:"animate-fade-in-right",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black mb-2 text-slate-900 dark:text-white",children:"Empecemos con tus datos"}),e.jsx("p",{className:"text-slate-500 mb-8",children:"Esta información nos permite contactarte directamente."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"student-name",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Nombre"}),e.jsx("input",{id:"student-name",type:"text",name:"name",value:t.name,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"Tu nombre",required:!0,"aria-required":"true"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"student-lastname",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Apellido"}),e.jsx("input",{id:"student-lastname",type:"text",name:"lastname",value:t.lastname,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"Tu apellido",required:!0,"aria-required":"true"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"student-email",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),e.jsx("input",{id:"student-email",type:"email",name:"email",value:t.email,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"ejemplo@correo.com",required:!0,"aria-required":"true"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"student-phone",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Teléfono / WhatsApp"}),e.jsx("input",{id:"student-phone",type:"tel",name:"phone",value:t.phone,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"(809) 000-0000",required:!0,"aria-required":"true"})]})]}),e.jsxs("div",{className:"mt-10 flex flex-col-reverse md:flex-row justify-between items-center gap-4",children:[e.jsx(p,{to:"/",className:"w-full md:w-auto py-3 text-center text-slate-500 hover:text-slate-800 font-medium",children:"Cancelar"}),e.jsxs("button",{onClick:n,className:"w-full md:w-auto px-8 py-4 bg-primary text-white rounded-xl font-bold hover:shadow-lg hover:bg-primary-dark transition-all transform hover:-translate-y-1 flex justify-center items-center",children:["Continuar ",e.jsx("span",{className:"material-icons text-sm ml-1",children:"arrow_forward"})]})]})]}));P.displayName="RegisterStep1";const F=C.memo(({formData:t,handleInputChange:s,setFormData:n,nextStep:c,prevStep:x})=>e.jsxs("div",{className:"animate-fade-in-right",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black mb-2 text-slate-900 dark:text-white",children:"Detalles del Servicio"}),e.jsx("p",{className:"text-slate-500 mb-8",children:"Selecciona el nivel y la modalidad de trabajo acordada."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project-university",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Universidad"}),e.jsx("input",{id:"project-university",type:"text",name:"university",value:t.university,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"Ej. UASD",required:!0,"aria-required":"true"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"project-career",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Carrera / Programa"}),e.jsx("input",{id:"project-career",type:"text",name:"career",value:t.career,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"Ej. Derecho / Maestría en...",required:!0,"aria-required":"true"})]})]}),e.jsxs("div",{children:[e.jsx("label",{id:"project-type-label",className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Tipo de Proyecto"}),e.jsx("div",{role:"group","aria-labelledby":"project-type-label",className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{label:"Tesis de Grado",icon:"school"},{label:"Monográfico",icon:"article"},{label:"Postgrado/Doctoral",icon:"psychology"},{label:"Tarea",icon:"assignment"},{label:"Artículo Científico",icon:"science"},{label:"Presentación",icon:"co_present"}].map(a=>e.jsxs("div",{role:"button",tabIndex:0,"aria-pressed":t.type===a.label,onClick:()=>n(d=>({...d,type:a.label})),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),n(g=>({...g,type:a.label})))},className:`p-3 border-2 rounded-xl cursor-pointer relative shadow-sm transition-all text-center flex flex-col items-center justify-center gap-2 ${t.type===a.label?"border-primary bg-blue-50 dark:bg-primary/10":"border-slate-200 dark:border-slate-700 hover:border-primary"}`,children:[t.type===a.label&&e.jsx("div",{className:"absolute top-2 right-2 text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"check_circle"})}),e.jsx("span",{className:"material-icons text-2xl text-slate-400",children:a.icon}),e.jsx("span",{className:`font-bold text-xs sm:text-sm leading-tight ${t.type===a.label?"text-primary":"text-slate-700 dark:text-slate-300"}`,children:a.label})]},a.label))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Modalidad de Servicio"}),e.jsx("div",{className:"space-y-3",children:[{id:"asesoria",title:"Solo Asesoría",desc:"Correcciones y guía metodológica."},{id:"parcial",title:"Desarrollo Colaborativo",desc:"Usted investiga, nosotros redactamos (50/50)."},{id:"completo",title:"Desarrollo Integral",desc:"Elaboración completa desde cero."}].map(a=>e.jsxs("div",{onClick:()=>n(d=>({...d,plan:a.id})),className:`p-4 border-2 rounded-xl cursor-pointer flex items-center gap-4 transition-all ${t.plan===a.id?"border-brand-orange bg-orange-50 dark:bg-orange-900/10":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[e.jsx("div",{className:`size-6 rounded-full border-2 flex items-center justify-center shrink-0 ${t.plan===a.id?"border-brand-orange":"border-slate-300"}`,children:t.plan===a.id&&e.jsx("div",{className:"size-3 rounded-full bg-brand-orange"})}),e.jsxs("div",{children:[e.jsx("div",{className:`font-bold ${t.plan===a.id?"text-brand-orange":"text-slate-800 dark:text-white"}`,children:a.title}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.desc})]})]},a.id))})]}),e.jsx("div",{className:"grid grid-cols-1 gap-5",children:e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Normativa"}),e.jsxs("select",{name:"normative",value:t.normative,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",children:[e.jsx("option",{children:"Normas APA (7ma)"}),e.jsx("option",{children:"Normas ISO"}),e.jsx("option",{children:"IEEE"}),e.jsx("option",{children:"Vancouver"})]})]})}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-6 rounded-xl border border-slate-200 dark:border-slate-700 space-y-6",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-icons text-green-500",children:"payments"})," Detalles Financieros"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Fecha Pautada de Entrega"}),e.jsx("input",{type:"date",name:"dueDate",value:t.dueDate,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Monto Total Acordado (DOP)"}),e.jsx("input",{type:"number",name:"totalAmount",value:t.totalAmount,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-sm block mb-2 text-slate-700 dark:text-slate-300",children:"Monto Abonado (DOP)"}),e.jsx("input",{type:"number",name:"paidAmount",value:t.paidAmount,onChange:s,className:"w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none transition-shadow",placeholder:"0.00"})]})]}),t.totalAmount&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-100 dark:border-slate-700 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Monto Restante"}),e.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white",children:["RD$ ",((parseFloat(t.totalAmount)||0)-(parseFloat(t.paidAmount)||0)).toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2.5",children:e.jsx("div",{className:"bg-brand-orange h-2.5 rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,(parseFloat(t.paidAmount)||0)/(parseFloat(t.totalAmount)||1)*100))}%`}})}),e.jsx("div",{className:"flex justify-end mt-1",children:e.jsxs("span",{className:"text-xs font-bold text-brand-orange",children:[Math.min(100,Math.max(0,(parseFloat(t.paidAmount)||0)/(parseFloat(t.totalAmount)||1)*100)).toFixed(1),"% Abonado"]})})]})]})]}),e.jsxs("div",{className:"mt-10 flex justify-between gap-4",children:[e.jsx("button",{onClick:x,className:"px-6 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 font-medium transition-colors",children:" Atrás"}),e.jsx("button",{onClick:c,className:"flex-1 md:flex-none px-8 py-3 bg-brand-orange text-white rounded-xl font-bold hover:shadow-lg hover:bg-orange-600 transition-all transform hover:-translate-y-1",children:"Siguiente"})]})]}));F.displayName="RegisterStep2";const z=({isSubmitting:t,prevStep:s,submitRegistration:n})=>e.jsxs("div",{className:"animate-fade-in-right",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black mb-2 text-slate-900 dark:text-white",children:"Sube tus Archivos"}),e.jsx("p",{className:"text-slate-500 mb-8",children:"Si tienes documentos previos, súbelos aquí. (Opcional)"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-8",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-bold text-slate-700 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-700 text-xs flex items-center justify-center",children:"1"})," Anteproyecto"]}),e.jsxs("div",{className:"h-32 border-2 border-dashed border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 rounded-xl flex flex-col items-center justify-center text-center p-4 cursor-pointer hover:bg-white dark:hover:bg-slate-800 hover:border-brand-orange dark:hover:border-brand-orange transition-all group",children:[e.jsx("span",{className:"material-icons text-3xl text-slate-400 group-hover:text-brand-orange mb-1 transition-colors",children:"cloud_upload"}),e.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 group-hover:text-brand-orange",children:"Subir PDF"})]})]})}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl items-start gap-3 flex mb-8",children:[e.jsx("span",{className:"material-icons text-blue-500 shrink-0",children:"info"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Si no tienes los archivos a mano, puedes continuar y enviarlos luego por WhatsApp a tu asesor asignado."})]}),e.jsxs("div",{className:"mt-10 flex flex-col-reverse md:flex-row justify-between gap-4",children:[e.jsx("button",{onClick:s,className:"w-full md:w-auto py-3 text-center rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 font-medium transition-colors",children:" Atrás"}),e.jsx("button",{onClick:n,disabled:t,className:"w-full md:w-auto px-8 py-4 bg-[#10b981] text-white rounded-xl font-bold hover:shadow-lg hover:bg-[#059669] transition-all transform hover:-translate-y-1 flex justify-center items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:t?e.jsxs(e.Fragment,{children:["Processing ",e.jsx("span",{className:"material-icons animate-spin",children:"sync"})]}):e.jsxs(e.Fragment,{children:["Finalizar Registro ",e.jsx("span",{className:"material-icons",children:"check_circle"})]})})]})]}),M=({onSearch:t,searchResult:s})=>{const[n,c]=i.useState(""),x=a=>{a.preventDefault(),t(n)};return e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-black mb-2 text-slate-900 dark:text-white",children:"Rastrea tu Proyecto"}),e.jsx("p",{className:"text-slate-500 mb-8",children:"Ingresa el código proporcionado al momento del registro."}),e.jsx("form",{onSubmit:x,className:"mb-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("input",{type:"text",value:n,onChange:a=>c(a.target.value.toUpperCase()),className:"flex-1 p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:outline-none uppercase tracking-widest font-bold placeholder:normal-case placeholder:tracking-normal w-full",placeholder:"Ej. TRX-8492"}),e.jsx("button",{type:"submit",className:"bg-brand-orange text-white px-8 py-4 rounded-xl font-bold hover:bg-orange-600 transition-colors shadow-lg shadow-orange-500/30 w-full md:w-auto",children:"Buscar"})]})}),s&&e.jsxs("div",{className:"bg-white dark:bg-[#1a2230] rounded-2xl p-6 border border-slate-200 dark:border-slate-700 shadow-xl animate-fade-in mb-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-bold mb-2",children:s.status}),e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white line-clamp-2",children:["Tesis: ",s.university]}),e.jsx("p",{className:"text-sm text-slate-500",children:s.type})]}),e.jsxs("div",{className:"text-right shrink-0 ml-4",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Última actualización"}),e.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:s.lastUpdate})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Progreso General"}),e.jsxs("span",{className:"text-brand-orange font-bold",children:[s.progress,"%"]})]}),e.jsx("div",{className:"h-3 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-brand-orange rounded-full",style:{width:`${s.progress}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Asesor Asignado"}),e.jsx("div",{className:"font-bold text-slate-800 dark:text-white truncate",children:s.advisor})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Próxima Entrega"}),e.jsx("div",{className:"font-bold text-slate-800 dark:text-white truncate",children:"Capítulo 1"})]})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(p,{to:"/",className:"inline-flex items-center text-slate-500 hover:text-brand-orange font-medium transition-colors",children:[e.jsx("span",{className:"material-icons mr-2",children:"arrow_back"})," Volver al inicio"]})})]})},O=({initialMode:t})=>{const s=R(),n=T(),[c,x]=i.useState("register"),[a,d]=i.useState(1),[g,v]=i.useState(!1),[r,N]=i.useState({name:"",lastname:"",email:"",phone:"",university:"",normative:"Normas APA (7ma)",totalAmount:"",paidAmount:"",dueDate:"",career:"",type:"Tesis de Grado",plan:"asesoria"}),[h,k]=i.useState(null),[E,f]=i.useState(null),b=i.useCallback((o,m="error")=>{k({message:o,type:m}),setTimeout(()=>k(null),3e3)},[]),_=i.useCallback(async()=>{v(!0);try{const{data:o,error:m}=await j.from("students").insert([{name:r.name,lastname:r.lastname,email:r.email,phone:r.phone,university:r.university,career:r.career}]).select().single();if(m)throw m;const{data:u,error:l}=await j.from("projects").insert([{student_id:o.id,type:r.type,description:`Plan: ${r.plan}, Normative: ${r.normative}`,total_amount:parseFloat(r.totalAmount)||0,paid_amount:parseFloat(r.paidAmount)||0,due_date:r.dueDate||null,status:"pending"}]).select("tracking_code").single();if(l)throw l;n("/student/success",{state:{trackingCode:u.tracking_code}})}catch(o){console.error("Registration Error:",o),b(o.message||"Hubo un error al registrar el proyecto.","error")}finally{v(!1)}},[r,n,b]),y=i.useCallback(o=>{const{name:m,value:u}=o.target;N(l=>({...l,[m]:u}))},[]);i.useEffect(()=>{const o=new URLSearchParams(s.search);t?x(t):o.get("mode")==="monitor"&&x("monitor")},[s,t]);const $=i.useCallback(async o=>{var u;if(!o.trim())return;const m=o.trim().toUpperCase();try{const{data:l,error:A}=await j.from("projects").select(`
                    *,
                    students (
                        university,
                        career,
                        name,
                        lastname
                    )
                `).eq("tracking_code",m).single();if(A)throw A;l?f({status:l.status==="pending"?"Pendiente":l.status==="assigned"?"Asignado":l.status==="in_progress"?"En Progreso":l.status,university:((u=l.students)==null?void 0:u.university)||"N/A",type:l.type,progress:l.paid_amount&&l.total_amount?Math.round(l.paid_amount/l.total_amount*100):0,advisor:"Por asignar",lastUpdate:new Date(l.created_at).toLocaleDateString()}):(b("No se encontró ningún proyecto con este código.","error"),f(null))}catch(l){console.error(l),b("No se encontró ningún proyecto con este código.","error"),f(null)}},[b]),w=()=>{if(a===1&&(!r.name||!r.lastname||!r.email||!r.phone)){b("Por favor completa todos los campos personales.");return}if(a===2&&(!r.university||!r.career||!r.totalAmount)){b("Por favor completa los detalles del proyecto.");return}d(o=>o+1)},S=()=>d(o=>o-1);return e.jsxs("div",{className:"flex h-screen w-full font-display bg-background-light dark:bg-background-dark text-slate-800 dark:text-white transition-colors duration-200",children:[h&&e.jsx("div",{className:"fixed top-20 right-4 z-[100] animate-fade-in-down",children:e.jsxs("div",{className:`px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 backdrop-blur-md border ${h.type==="error"?"bg-red-500/90 text-white border-red-400":"bg-green-500/90 text-white border-green-400"}`,children:[e.jsx("div",{className:`p-1 rounded-full ${h.type==="error","bg-white/20"}`,children:e.jsx("span",{className:"material-symbols-outlined text-lg block",children:h.type==="error"?"priority_high":"check"})}),e.jsx("span",{className:"font-bold text-sm shadow-sm",children:h.message})]})}),e.jsx(q,{mode:c,step:a}),e.jsxs("main",{className:"flex-1 overflow-y-auto w-full bg-white dark:bg-slate-900 md:bg-transparent transition-colors custom-scrollbar relative",children:[e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-100 dark:border-slate-800 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm sticky top-0 z-30",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-2 text-slate-900 dark:text-white font-bold",children:[e.jsx("span",{className:"material-symbols-outlined text-brand-orange",children:"school"}),e.jsxs("span",{children:["TuTesis",e.jsx("span",{className:"text-brand-orange",children:"RD"})]})]}),c==="register"&&e.jsxs("div",{className:"text-xs font-bold px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-600 dark:text-slate-400",children:["Paso ",a," de 3"]})]}),e.jsxs("div",{className:"p-4 md:p-8 lg:p-16 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl mb-8 w-full md:w-fit mx-auto md:mx-0 shadow-inner",children:[e.jsx("button",{onClick:()=>x("register"),className:`flex-1 md:flex-none px-4 md:px-6 py-3 rounded-lg text-sm font-bold transition-all ${c==="register"?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:"Registrar"}),e.jsx("button",{onClick:()=>x("monitor"),className:`flex-1 md:flex-none px-4 md:px-6 py-3 rounded-lg text-sm font-bold transition-all ${c==="monitor"?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:"Monitorear"})]}),c==="register"?e.jsxs(e.Fragment,{children:[a===1&&e.jsx(P,{formData:r,handleInputChange:y,nextStep:w}),a===2&&e.jsx(F,{formData:r,handleInputChange:y,setFormData:N,nextStep:w,prevStep:S}),a===3&&e.jsx(z,{isSubmitting:g,prevStep:S,submitRegistration:_})]}):e.jsx(M,{onSearch:$,searchResult:E})]})]})]})};export{O as default};
